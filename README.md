# React + Vite

本项目使用 react + vite 进行开发，在学习不同框架的过程中进行实践，同时也作为一个自己常用的小工具网站。

目前有两个计划的小工具:

- 作为自己的图床，实现图片上传功能。为自己在要用到图片的地方提供一个入口，将图片上传到服务器，并且返回对应访问图片的路径。
- 创建可视化页面，展示自己的博客网站的访问量信息等内容。

## TodoList

* [x] 后端接口修改一下
  * [x] 适配三种图片上传
  * [ ] 图片格式校验处理一下，防止被入侵
* [ ] 目前遇到的多图片上传的bug处理一下，为什么会返回一样的 url ？
  * [ ] 是因为时间戳相同导致返回两张一样的图片吗？（后端）
  * [ ] 还是因为前端传输问题，antd 的 action 不好用？如果是这样就自己在回调函数中执行方法。
  * [ ] 还有一个不太重要的，文件上传的顺序和我选择的顺序又是不一样了，这时候要怎么处理才能让它变成一样的顺序呢？
    * [ ] 这个问题统一解决一下，这样说不定还能写到简历中！毕竟需求也遇到了
* [ ] 将博客的图片进行更新优化，展示到页面上
* [ ] 部署前端项目到服务器上，如果可以也弄一个 Jenkins 来实现自动构建吧!
* [ ] 前端埋点的接口实现以及前端图表展示
* [ ] 目前的 URL 是写死的，去了解一下 开发环境相关的知识，并且实现自动根据不同的环境获取 URL。目前看了教程，知道怎么配置了，但如何使用，以及会发生什么事还不清楚，去变强！

## 开发过程中的小细节

> 重定向路由时，网上的教程都是针对 jsx 的回答，而目前最新的 react-router-dom 6.22.2 的版本中使用的 createBrowserRouter 却没有说怎么样重定向。

> 最后还是通过看官方文档找到答案，也随着回忆起了之前不知道在哪看过的视频也说到了。

```javascript
// 一开始的写法
// 从 react-router-dom 中引入 redirect
{
  path: '/',
  redirect: '/home', // 这个根本就没有用
  element: <Label />,
  children: [
    {
      path: '/home',
      element: <Home />
    },
    {
      path: '/charts',
      element: <Charts />
    },
    {
      path: '/upload/:type',
      element: <Upload />
    }
  ]
},
```

```javascript
// 最终成功的写法

  {
    path: '/',
    element: <Label />,
    children: [
      {
        index: true,// 设置了这个 index 就不要再设置 path了，并且之后 tab 页中跳转的路由也是直接使用 '/'
        element: <Home />
      },
      {
        path: '/charts',
        element: <Charts />
      },
      {
        path: '/upload/:type',
        element: <Upload />
      }
    ]
  },
```

---

附上 查看官网 的图片：

![通过查阅路由官网找到路由重定向的解决方案](http://8.134.197.161:3000/api/images/other/image-1710003183016.jpeg)



---

> 第一次自己感受到调试 开发、本地 环境时切换 URL 很麻烦，然后去了解如何设置 环境变量，并且使用起来。
>
> 网上有很好的教程，很快就学会，并且经过验证使用到项目中了

友情链接参考教程：[腾讯云社区的2023年底-针对使用环境变量的一个很好的文章](https://cloud.tencent.com/developer/article/2354445)

* 实际上就是创建三个环境变量文件，并且在里面进行对应的配置
* 接着使用的话就用：` import.meta.env ` 就可以看到当前环境中设置的环境变量的值
* 最后还有一个细节是：在 `packge.json`  中可以配置对应的命令，设置 **--mode** 可以让项目以指定的环境去运行，这个还是很实用的！